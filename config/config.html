<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.1">
<title>ploigos_step_runner.config.config API documentation</title>
<meta name="description" content="Representation of configuration for workflow.">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>ploigos_step_runner.config.config</code></h1>
</header>
<section id="section-intro">
<p>Representation of configuration for workflow.</p>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="ploigos_step_runner.config.config.Config"><code class="flex name class">
<span>class <span class="ident">Config</span></span>
<span>(</span><span>config=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Representation of configuration for Ploigos workflow.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>config</code></strong> :&ensp;<code>dict, list, str (file</code> or <code>directory)</code>, optional</dt>
<dd>A dictionary that is a valid configuration,
or a string that is a path to a YAML or JSON file that is
a valid configuration,
or a string that is a path to a directory containing one or more
files that are valid YAML or JSON files that are valid
configurations,
or a list of any of the former.</dd>
</dl>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>__global_defaults</code></strong> :&ensp;<code>dict</code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>__global_environment_defaults</code></strong> :&ensp;<code>dict</code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>__step_configs</code></strong> :&ensp;<code>dict</code> of <code>str (step names) to StepConfig</code></dt>
<dd>&nbsp;</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>ValueError</code></dt>
<dd>If given config is not of expected type.</dd>
<dt><code>AssertionError</code></dt>
<dd>If given config contains any invalid configurations.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Config:
    &#34;&#34;&#34;Representation of configuration for Ploigos workflow.

    Parameters
    ----------
    config : dict, list, str (file or directory), optional
        A dictionary that is a valid configuration,
        or a string that is a path to a YAML or JSON file that is
        a valid configuration,
        or a string that is a path to a directory containing one or more
        files that are valid YAML or JSON files that are valid
        configurations,
        or a list of any of the former.

    Attributes
    ----------
    __global_defaults : dict
    __global_environment_defaults : dict
    __step_configs : dict of str (step names) to StepConfig

    Raises
    ------
    ValueError
        If given config is not of expected type.
    AssertionError
        If given config contains any invalid configurations.
    &#34;&#34;&#34;
    CONFIG_KEY = &#39;step-runner-config&#39;
    CONFIG_KEY_GLOBAL_DEFAULTS = &#39;global-defaults&#39;
    CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS = &#39;global-environment-defaults&#39;
    CONFIG_KEY_ENVIRONMENT_NAME = &#39;environment-name&#39;
    CONFIG_KEY_CONTINUE_SUB_STEPS_ON_FAILURE = &#39;continue-sub-steps-on-failure&#39;
    CONFIG_KEY_STEP_IMPLEMENTER = &#39;implementer&#39;
    CONFIG_KEY_SUB_STEP_NAME = &#39;name&#39;
    CONFIG_KEY_SUB_STEP_CONFIG = &#39;config&#39;
    CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG = &#39;environment-config&#39;
    CONFIG_KEY_DECRYPTORS = &#39;config-decryptors&#39;
    CONFIG_KEY_DECRYPTOR_IMPLEMENTER = &#39;implementer&#39;
    CONFIG_KEY_DECRYPTOR_CONFIG = &#39;config&#39;

    def __init__(self, config=None):
        self.__global_defaults = {}
        self.__global_environment_defaults = {}
        self.__step_configs = {}

        if config is not None:
            self.add_config(config)

    @property
    def global_defaults(self):
        &#34;&#34;&#34;Get a deep copy of the global defaults.

        Returns
        -------
        dict
            Deep copy of the global defaults.
        &#34;&#34;&#34;
        return copy.deepcopy(self.__global_defaults)

    @property
    def global_environment_defaults(self):
        &#34;&#34;&#34;Deep copy of all global environment defaults for all environments.

        Returns
        -------
        dict
            deep copy of all global environment defaults.
        &#34;&#34;&#34;
        return copy.deepcopy(self.__global_environment_defaults)

    @property
    def step_configs(self):
        &#34;&#34;&#34;
        Returns
        -------
        list of StepConfig
        &#34;&#34;&#34;
        return self.__step_configs

    def get_global_environment_defaults_for_environment(self, env):
        &#34;&#34;&#34;Get a deep copy of all of the global environment defaults or for a given an environment.

        Parameters
        ----------
        env : str
            The global environment defaults for the given environment.
            If given environment name does not exist in environment defaults then empty dict.

        Returns
        -------
        dict
            Deep copy of the global environment defaults for the given environment
            or empty dict if no environment given or environment does not exist in the defaults
        &#34;&#34;&#34;
        if env is not None:
            if env in self.__global_environment_defaults:
                global_environment_defaults = copy.deepcopy(self.__global_environment_defaults[env])
            else:
                global_environment_defaults = {}
        else:
            global_environment_defaults = {}

        return global_environment_defaults

    def get_step_config(self, step_name):
        &#34;&#34;&#34;Get the step config for a given step name.

        Parameters
        ----------
        step_name : str
            Name of the step to get the step configuration for.

        Returns
        -------
        StepConfig
            Step configuration for the given step name or None if does not exist
        &#34;&#34;&#34;
        if step_name in self.step_configs:
            step_config = self.step_configs[step_name]
        else:
            step_config = None

        return step_config

    def get_sub_step_configs(self, step_name):
        &#34;&#34;&#34;Gets lit of configured sub step configurations for a step with the given name.

        Parameters
        ----------
        step_name : str
            Name of step to get configured sub steps for.

        Returns
        -------
        list of SubStepConfig
            List of configured sub step configurations for the step with the given name.
        &#34;&#34;&#34;

        if step_name in self.step_configs:
            sub_step_configs = self.step_configs[step_name].sub_steps
        else:
            sub_step_configs = []

        return sub_step_configs

    def add_config(self, config):
        &#34;&#34;&#34;Parses, validates, and adds a given config to this Config.

        Parameters
        ----------
        config : dict, list, str (file or directory)
            A dictionary that is a valid configuration,
            or aa string that is a path to a YAML or JSON file that is
            a valid configuration,
            or a string that is a path to a directory containing one or more
            files that are valid YAML or JSON files that are valid
            configurations,
            or a list of any of the former.

        Raises
        ------
        ValueError
            If given config is not of expected type.
        AssertionError
            If given config contains any invalid configurations.
        &#34;&#34;&#34;
        if isinstance(config, dict):
            # add the config
            self.__add_config_dict(config)
        elif isinstance(config, list):
            # for each item in the list, treat it as a config to add
            for _config in config:
                self.add_config(_config)
        elif isinstance(config, str):
            if os.path.isfile(config):
                self.__add_config_file(config)
            elif os.path.isdir(config):
                # for each recursively found file in the directory add the config file
                config_dir_files = glob.glob(config + &#39;/**&#39;, recursive=True)
                found_nested_file = False
                for config_dir_file in config_dir_files:
                    if os.path.isfile(config_dir_file):
                        found_nested_file = True
                        self.__add_config_file(config_dir_file)

                if not found_nested_file:
                    raise ValueError(
                        f&#34;Given config string ({config}) is a directory&#34; +
                        &#34; with no recursive children files.&#34;
                    )
            else:
                raise ValueError(
                    f&#34;Given config string ({config}) is not a valid path.&#34;
                )
        else:
            raise ValueError(
                f&#34;Given config ({config}) is unexpected type ({type(config)}) &#34; +
                &#34;not a dictionary, string, or list of former.&#34;
            )

    def set_step_config_overrides(self, step_name, step_config_overrides):
        &#34;&#34;&#34;Sets configuration overrides for all sub steps of a given step.

        Notes
        -----
        If step configuration overrides are already set for the given step then
        the existing overides will be replaced with the newly given step configuration
        overrides.

        Parameters
        ----------
        step_name : str
            Name of step to add configuration overrides for all sub steps for.
        step_config_overrides : dict
            Overrides for all sub steps for the step with the given name.
        &#34;&#34;&#34;
        if step_name not in self.step_configs:
            self.step_configs[step_name] = StepConfig(self, step_name)

        self.step_configs[step_name].step_config_overrides = step_config_overrides

    def __add_config_file(self, config_file):
        &#34;&#34;&#34;Adds a JSON or YAML file as config to this Config.

        Parameters
        ----------
        config_file : str (file path)
            A string that is a path to an existing YAML or JSON file to
            parse and validate as a configuration to add to this Config.

        Raises
        ------
        ValueError
            If can not parse given file as YAML or JSON
        AssertionError
            If dictionary parsed from given YAML or JSON file is not a valid config.
        &#34;&#34;&#34;
        # parse the configuration file
        try:
            parsed_config_file = parse_yaml_or_json_file(config_file)
        except ValueError as error:
            raise ValueError(
                f&#34;Error parsing config file ({config_file}) as json or yaml&#34;
            ) from error

        # add the config parsed from file
        try:
            self.__add_config_dict(parsed_config_file, config_file)
        except AssertionError as error:
            raise AssertionError(
                f&#34;Failed to add parsed configuration file ({config_file}): {error}&#34;
            ) from error

    def __add_config_dict(self, config_dict, source_file_path=None): # pylint: disable=too-many-locals, too-many-branches, too-many-statements
        &#34;&#34;&#34;Add a configuration dictionary to the list of configuration dictionaries.

        Parameters
        ----------
        config_dict : dict
            A dictionary to validate as a configuration and to add to this Config.
        source_file_path : str, optional
            File path to the file from which the given config_dict came from.

        Raises
        ------
        AssertionError
            If the given config_dict is not a valid configuration dictionary.
            If attempt to update an existing sub step and new and existing sub step implementers
                do not match.
            If sub step does not define a step implementer.
        ValueError
            If duplicative leaf keys when merging global defaults
            If duplicative leaf keys when merging global env defaults
            If step config is not of type dict or list
            If new sub step configuration has duplicative leaf keys to
                existing sub step configuration.
            If new sub step environment configuration has duplicative leaf keys to
                existing sub step environment configuration.
        &#34;&#34;&#34;

        assert Config.CONFIG_KEY in config_dict, \
            &#34;Failed to add invalid config. &#34; + \
            f&#34;Missing expected top level key ({Config.CONFIG_KEY}): &#34; + \
            f&#34;{config_dict}&#34;

        # if file path given use that as the source when creating ConfigValue objects
        # else use a copy of the given configuration dictionary
        if source_file_path is not None:
            parent_source = source_file_path
        else:
            parent_source = copy.deepcopy(config_dict)

        # convert all the leaves of the configuration dictionary under
        # the Config.CONFIG_KEY to ConfigValue objects
        config_values = ConfigValue.convert_leaves_to_config_values(
            values=copy.deepcopy(config_dict[Config.CONFIG_KEY]),
            parent_source=parent_source,
            path_parts=[Config.CONFIG_KEY]
        )

        for key, value in config_values.items():
            # if global default key
            # else if global env defaults key
            # else assume step config
            if key == Config.CONFIG_KEY_GLOBAL_DEFAULTS:
                try:
                    self.__global_defaults = deep_merge(
                        copy.deepcopy(self.__global_defaults),
                        copy.deepcopy(value)
                    )
                except ValueError as error:
                    raise ValueError(
                        f&#34;Error merging global defaults: {error}&#34;
                    ) from error
            elif key == Config.CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS:
                for env, env_config in value.items():
                    if env not in self.__global_environment_defaults:
                        self.__global_environment_defaults[env] = {
                            Config.CONFIG_KEY_ENVIRONMENT_NAME: env
                        }

                    try:
                        self.__global_environment_defaults[env] = deep_merge(
                            copy.deepcopy(self.__global_environment_defaults[env]),
                            copy.deepcopy(env_config)
                        )
                    except ValueError as error:
                        raise ValueError(
                            f&#34;Error merging global environment ({env}) defaults: {error}&#34;
                        ) from error
            elif key == Config.CONFIG_KEY_DECRYPTORS:
                config_decryptor_definitions = ConfigValue.convert_leaves_to_values(value)
                Config.parse_and_register_decryptors_definitions(config_decryptor_definitions)
            else:
                step_name = key
                step_config = value

                # if step_config is dict then assume step with single sub step
                if isinstance(step_config, dict):
                    sub_steps = [step_config]
                elif isinstance(step_config, list):
                    sub_steps = step_config
                else:
                    raise ValueError(
                        f&#34;Expected step ({step_name}) to have have step config ({step_config})&#34; +
                        f&#34; of type dict or list but got: {type(step_config)}&#34;
                    )

                for sub_step in sub_steps:
                    assert Config.CONFIG_KEY_STEP_IMPLEMENTER in sub_step, \
                        f&#34;Step ({step_name}) defines a single sub step with values &#34; + \
                        f&#34;({sub_step}) but is missing value for key: &#34; + \
                        f&#34;{Config.CONFIG_KEY_STEP_IMPLEMENTER}&#34;

                    sub_step_implementer_name = \
                        sub_step[Config.CONFIG_KEY_STEP_IMPLEMENTER].value

                    # if sub step name given
                    # else if no sub step name given use step implementer as sub step name
                    if Config.CONFIG_KEY_SUB_STEP_NAME in sub_step:
                        sub_step_name = sub_step[Config.CONFIG_KEY_SUB_STEP_NAME].value
                    else:
                        sub_step_name = sub_step_implementer_name

                    # determine sub step config
                    if Config.CONFIG_KEY_SUB_STEP_CONFIG in sub_step:
                        sub_step_config_dict = copy.deepcopy(
                            sub_step[Config.CONFIG_KEY_SUB_STEP_CONFIG])
                    else:
                        sub_step_config_dict = {}

                    # determine sub step environment config
                    if Config.CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG in sub_step:
                        sub_step_env_config = copy.deepcopy(
                            sub_step[Config.CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG])
                    else:
                        sub_step_env_config = {}

                    # determine if continue sub steps on this sub step failure
                    sub_step_contine_sub_steps_on_failure = False
                    if Config.CONFIG_KEY_CONTINUE_SUB_STEPS_ON_FAILURE in sub_step:
                        sub_step_contine_sub_steps_on_failure = sub_step[
                            Config.CONFIG_KEY_CONTINUE_SUB_STEPS_ON_FAILURE
                        ]
                        if isinstance(sub_step_contine_sub_steps_on_failure.value, bool):
                            sub_step_contine_sub_steps_on_failure = \
                                sub_step_contine_sub_steps_on_failure.value
                        else:
                            sub_step_contine_sub_steps_on_failure = bool(
                                strtobool(sub_step_contine_sub_steps_on_failure.value)
                            )

                    self.add_or_update_step_config(
                        step_name=step_name,
                        sub_step_name=sub_step_name,
                        sub_step_implementer_name=sub_step_implementer_name,
                        sub_step_config_dict=sub_step_config_dict,
                        sub_step_env_config=sub_step_env_config,
                        sub_step_contine_sub_steps_on_failure=sub_step_contine_sub_steps_on_failure
                    )

    @staticmethod
    def parse_and_register_decryptors_definitions(decryptors_definitions):
        &#34;&#34;&#34;Parse decryptor definitions from a list and then register them with the DecryptionUtils.

        Parameters
        ----------
        decryptors_definitions : list of dicts
            List of decryptor definitions. Each element should be a dict with at least an
            &#39;implementer&#39; key with a string value and optionally a &#39;config&#39; key with a dict value.

        Raises
        ------
        AssertionError
            If decryptors_definitions is not a list.
            If a decryptor definition does not have a
                Config.CONFIG_KEY_DECRYPTOR_IMPLEMENTER key.
        &#34;&#34;&#34;
        assert isinstance(decryptors_definitions, list), \
            f&#34;Decryptors configuration ({decryptors_definitions}) must be of type &#34; + \
            f&#34;(list) got: {type(decryptors_definitions)}&#34;

        for decryptor_definition in decryptors_definitions:
            assert Config.CONFIG_KEY_DECRYPTOR_IMPLEMENTER in decryptor_definition, \
                &#34;Decryptor configuration is missing key &#34; + \
                f&#34;({Config.CONFIG_KEY_DECRYPTOR_IMPLEMENTER}): {decryptor_definition}&#34;

            decryptor_implementer_name = \
                decryptor_definition[Config.CONFIG_KEY_DECRYPTOR_IMPLEMENTER]

            if Config.CONFIG_KEY_DECRYPTOR_CONFIG in decryptor_definition:
                decryptor_config = decryptor_definition[Config.CONFIG_KEY_DECRYPTOR_CONFIG]
            else:
                decryptor_config = {}

            DecryptionUtils.create_and_register_config_value_decryptor(
                decryptor_implementer_name,
                decryptor_config
            )

    def add_or_update_step_config( # pylint: disable=too-many-arguments
        self,
        step_name,
        sub_step_name,
        sub_step_implementer_name,
        sub_step_config_dict,
        sub_step_env_config,
        sub_step_contine_sub_steps_on_failure=False
    ):
        &#34;&#34;&#34;Adds a new step configuration with a single new sub step or
        updates an existing step with new or updated sub step.

        Parameters
        ----------
        step_name : str
            Name of step to create or update.
        sub_step_name : str
            Name of the sub step to add or update on the new or updated step.
        sub_step_implementer_name : str
            Name of the sub step implementer for the sub step being added or updated.
            If updating this can not be different then existing sub step with the same name.
        sub_step_config_dict : dict, optional
            Sub step configuration to add or update for named sub step on the new or updated step.
            If updating this can not have any duplicative leaf keys to the existing
                sub step configuration.
        sub_step_env_config : dict, optional
            Sub step environment configuration to add or update for named sub step on the
                new or updated step.
            If updating this can not have any duplicative leaf keys to the existing
                sub step environment configuration.
        sub_step_contine_sub_steps_on_failure : bool
            True to continue executing other sub steps in current step if this sub step fails.
            False to fail all step execution if this sub step fails.

        Raises
        ------
        AssertionError
            If attempt to update an existing sub step and new and existing sub step implementers
                do not match.
        ValueError
            If new sub step configuration has duplicative leaf keys to
                existing sub step configuration.
            If new sub step environment configuration has duplicative leaf keys to
                existing sub step environment configuration.
        &#34;&#34;&#34;

        if step_name not in self.step_configs:
            self.step_configs[step_name] = StepConfig(self, step_name)

        step_config = self.step_configs[step_name]
        step_config.add_or_update_sub_step_config(
            sub_step_name=sub_step_name,
            sub_step_implementer_name=sub_step_implementer_name,
            sub_step_config_dict=sub_step_config_dict,
            sub_step_env_config=sub_step_env_config,
            sub_step_contine_sub_steps_on_failure=sub_step_contine_sub_steps_on_failure
        )</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="ploigos_step_runner.config.config.Config.CONFIG_KEY"><code class="name">var <span class="ident">CONFIG_KEY</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.CONFIG_KEY_CONTINUE_SUB_STEPS_ON_FAILURE"><code class="name">var <span class="ident">CONFIG_KEY_CONTINUE_SUB_STEPS_ON_FAILURE</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.CONFIG_KEY_DECRYPTORS"><code class="name">var <span class="ident">CONFIG_KEY_DECRYPTORS</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.CONFIG_KEY_DECRYPTOR_CONFIG"><code class="name">var <span class="ident">CONFIG_KEY_DECRYPTOR_CONFIG</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.CONFIG_KEY_DECRYPTOR_IMPLEMENTER"><code class="name">var <span class="ident">CONFIG_KEY_DECRYPTOR_IMPLEMENTER</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.CONFIG_KEY_ENVIRONMENT_NAME"><code class="name">var <span class="ident">CONFIG_KEY_ENVIRONMENT_NAME</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.CONFIG_KEY_GLOBAL_DEFAULTS"><code class="name">var <span class="ident">CONFIG_KEY_GLOBAL_DEFAULTS</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS"><code class="name">var <span class="ident">CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.CONFIG_KEY_STEP_IMPLEMENTER"><code class="name">var <span class="ident">CONFIG_KEY_STEP_IMPLEMENTER</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.CONFIG_KEY_SUB_STEP_CONFIG"><code class="name">var <span class="ident">CONFIG_KEY_SUB_STEP_CONFIG</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG"><code class="name">var <span class="ident">CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.CONFIG_KEY_SUB_STEP_NAME"><code class="name">var <span class="ident">CONFIG_KEY_SUB_STEP_NAME</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="ploigos_step_runner.config.config.Config.parse_and_register_decryptors_definitions"><code class="name flex">
<span>def <span class="ident">parse_and_register_decryptors_definitions</span></span>(<span>decryptors_definitions)</span>
</code></dt>
<dd>
<div class="desc"><p>Parse decryptor definitions from a list and then register them with the DecryptionUtils.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>decryptors_definitions</code></strong> :&ensp;<code>list</code> of <code>dicts</code></dt>
<dd>List of decryptor definitions. Each element should be a dict with at least an
'implementer' key with a string value and optionally a 'config' key with a dict value.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>AssertionError</code></dt>
<dd>If decryptors_definitions is not a list.
If a decryptor definition does not have a
Config.CONFIG_KEY_DECRYPTOR_IMPLEMENTER key.</dd>
</dl></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="ploigos_step_runner.config.config.Config.global_defaults"><code class="name">prop <span class="ident">global_defaults</span></code></dt>
<dd>
<div class="desc"><p>Get a deep copy of the global defaults.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Deep copy of the global defaults.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def global_defaults(self):
    &#34;&#34;&#34;Get a deep copy of the global defaults.

    Returns
    -------
    dict
        Deep copy of the global defaults.
    &#34;&#34;&#34;
    return copy.deepcopy(self.__global_defaults)</code></pre>
</details>
</dd>
<dt id="ploigos_step_runner.config.config.Config.global_environment_defaults"><code class="name">prop <span class="ident">global_environment_defaults</span></code></dt>
<dd>
<div class="desc"><p>Deep copy of all global environment defaults for all environments.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>deep copy of all global environment defaults.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def global_environment_defaults(self):
    &#34;&#34;&#34;Deep copy of all global environment defaults for all environments.

    Returns
    -------
    dict
        deep copy of all global environment defaults.
    &#34;&#34;&#34;
    return copy.deepcopy(self.__global_environment_defaults)</code></pre>
</details>
</dd>
<dt id="ploigos_step_runner.config.config.Config.step_configs"><code class="name">prop <span class="ident">step_configs</span></code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns</h2>
<dl>
<dt><code>list</code> of <code>StepConfig</code></dt>
<dd>&nbsp;</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def step_configs(self):
    &#34;&#34;&#34;
    Returns
    -------
    list of StepConfig
    &#34;&#34;&#34;
    return self.__step_configs</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="ploigos_step_runner.config.config.Config.add_config"><code class="name flex">
<span>def <span class="ident">add_config</span></span>(<span>self, config)</span>
</code></dt>
<dd>
<div class="desc"><p>Parses, validates, and adds a given config to this Config.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>config</code></strong> :&ensp;<code>dict, list, str (file</code> or <code>directory)</code></dt>
<dd>A dictionary that is a valid configuration,
or aa string that is a path to a YAML or JSON file that is
a valid configuration,
or a string that is a path to a directory containing one or more
files that are valid YAML or JSON files that are valid
configurations,
or a list of any of the former.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>ValueError</code></dt>
<dd>If given config is not of expected type.</dd>
<dt><code>AssertionError</code></dt>
<dd>If given config contains any invalid configurations.</dd>
</dl></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.add_or_update_step_config"><code class="name flex">
<span>def <span class="ident">add_or_update_step_config</span></span>(<span>self, step_name, sub_step_name, sub_step_implementer_name, sub_step_config_dict, sub_step_env_config, sub_step_contine_sub_steps_on_failure=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Adds a new step configuration with a single new sub step or
updates an existing step with new or updated sub step.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of step to create or update.</dd>
<dt><strong><code>sub_step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the sub step to add or update on the new or updated step.</dd>
<dt><strong><code>sub_step_implementer_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the sub step implementer for the sub step being added or updated.
If updating this can not be different then existing sub step with the same name.</dd>
<dt><strong><code>sub_step_config_dict</code></strong> :&ensp;<code>dict</code>, optional</dt>
<dd>Sub step configuration to add or update for named sub step on the new or updated step.
If updating this can not have any duplicative leaf keys to the existing
sub step configuration.</dd>
<dt><strong><code>sub_step_env_config</code></strong> :&ensp;<code>dict</code>, optional</dt>
<dd>Sub step environment configuration to add or update for named sub step on the
new or updated step.
If updating this can not have any duplicative leaf keys to the existing
sub step environment configuration.</dd>
<dt><strong><code>sub_step_contine_sub_steps_on_failure</code></strong> :&ensp;<code>bool</code></dt>
<dd>True to continue executing other sub steps in current step if this sub step fails.
False to fail all step execution if this sub step fails.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>AssertionError</code></dt>
<dd>If attempt to update an existing sub step and new and existing sub step implementers
do not match.</dd>
<dt><code>ValueError</code></dt>
<dd>If new sub step configuration has duplicative leaf keys to
existing sub step configuration.
If new sub step environment configuration has duplicative leaf keys to
existing sub step environment configuration.</dd>
</dl></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.get_global_environment_defaults_for_environment"><code class="name flex">
<span>def <span class="ident">get_global_environment_defaults_for_environment</span></span>(<span>self, env)</span>
</code></dt>
<dd>
<div class="desc"><p>Get a deep copy of all of the global environment defaults or for a given an environment.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>env</code></strong> :&ensp;<code>str</code></dt>
<dd>The global environment defaults for the given environment.
If given environment name does not exist in environment defaults then empty dict.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Deep copy of the global environment defaults for the given environment
or empty dict if no environment given or environment does not exist in the defaults</dd>
</dl></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.get_step_config"><code class="name flex">
<span>def <span class="ident">get_step_config</span></span>(<span>self, step_name)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the step config for a given step name.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the step to get the step configuration for.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>StepConfig</code></dt>
<dd>Step configuration for the given step name or None if does not exist</dd>
</dl></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.get_sub_step_configs"><code class="name flex">
<span>def <span class="ident">get_sub_step_configs</span></span>(<span>self, step_name)</span>
</code></dt>
<dd>
<div class="desc"><p>Gets lit of configured sub step configurations for a step with the given name.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of step to get configured sub steps for.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>list</code> of <code>SubStepConfig</code></dt>
<dd>List of configured sub step configurations for the step with the given name.</dd>
</dl></div>
</dd>
<dt id="ploigos_step_runner.config.config.Config.set_step_config_overrides"><code class="name flex">
<span>def <span class="ident">set_step_config_overrides</span></span>(<span>self, step_name, step_config_overrides)</span>
</code></dt>
<dd>
<div class="desc"><p>Sets configuration overrides for all sub steps of a given step.</p>
<h2 id="notes">Notes</h2>
<p>If step configuration overrides are already set for the given step then
the existing overides will be replaced with the newly given step configuration
overrides.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>step_name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of step to add configuration overrides for all sub steps for.</dd>
<dt><strong><code>step_config_overrides</code></strong> :&ensp;<code>dict</code></dt>
<dd>Overrides for all sub steps for the step with the given name.</dd>
</dl></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="ploigos_step_runner.config" href="index.html">ploigos_step_runner.config</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="ploigos_step_runner.config.config.Config" href="#ploigos_step_runner.config.config.Config">Config</a></code></h4>
<ul class="">
<li><code><a title="ploigos_step_runner.config.config.Config.CONFIG_KEY" href="#ploigos_step_runner.config.config.Config.CONFIG_KEY">CONFIG_KEY</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.CONFIG_KEY_CONTINUE_SUB_STEPS_ON_FAILURE" href="#ploigos_step_runner.config.config.Config.CONFIG_KEY_CONTINUE_SUB_STEPS_ON_FAILURE">CONFIG_KEY_CONTINUE_SUB_STEPS_ON_FAILURE</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.CONFIG_KEY_DECRYPTORS" href="#ploigos_step_runner.config.config.Config.CONFIG_KEY_DECRYPTORS">CONFIG_KEY_DECRYPTORS</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.CONFIG_KEY_DECRYPTOR_CONFIG" href="#ploigos_step_runner.config.config.Config.CONFIG_KEY_DECRYPTOR_CONFIG">CONFIG_KEY_DECRYPTOR_CONFIG</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.CONFIG_KEY_DECRYPTOR_IMPLEMENTER" href="#ploigos_step_runner.config.config.Config.CONFIG_KEY_DECRYPTOR_IMPLEMENTER">CONFIG_KEY_DECRYPTOR_IMPLEMENTER</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.CONFIG_KEY_ENVIRONMENT_NAME" href="#ploigos_step_runner.config.config.Config.CONFIG_KEY_ENVIRONMENT_NAME">CONFIG_KEY_ENVIRONMENT_NAME</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.CONFIG_KEY_GLOBAL_DEFAULTS" href="#ploigos_step_runner.config.config.Config.CONFIG_KEY_GLOBAL_DEFAULTS">CONFIG_KEY_GLOBAL_DEFAULTS</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS" href="#ploigos_step_runner.config.config.Config.CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS">CONFIG_KEY_GLOBAL_ENVIRONMENT_DEFAULTS</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.CONFIG_KEY_STEP_IMPLEMENTER" href="#ploigos_step_runner.config.config.Config.CONFIG_KEY_STEP_IMPLEMENTER">CONFIG_KEY_STEP_IMPLEMENTER</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.CONFIG_KEY_SUB_STEP_CONFIG" href="#ploigos_step_runner.config.config.Config.CONFIG_KEY_SUB_STEP_CONFIG">CONFIG_KEY_SUB_STEP_CONFIG</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG" href="#ploigos_step_runner.config.config.Config.CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG">CONFIG_KEY_SUB_STEP_ENVIRONMENT_CONFIG</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.CONFIG_KEY_SUB_STEP_NAME" href="#ploigos_step_runner.config.config.Config.CONFIG_KEY_SUB_STEP_NAME">CONFIG_KEY_SUB_STEP_NAME</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.add_config" href="#ploigos_step_runner.config.config.Config.add_config">add_config</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.add_or_update_step_config" href="#ploigos_step_runner.config.config.Config.add_or_update_step_config">add_or_update_step_config</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.get_global_environment_defaults_for_environment" href="#ploigos_step_runner.config.config.Config.get_global_environment_defaults_for_environment">get_global_environment_defaults_for_environment</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.get_step_config" href="#ploigos_step_runner.config.config.Config.get_step_config">get_step_config</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.get_sub_step_configs" href="#ploigos_step_runner.config.config.Config.get_sub_step_configs">get_sub_step_configs</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.global_defaults" href="#ploigos_step_runner.config.config.Config.global_defaults">global_defaults</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.global_environment_defaults" href="#ploigos_step_runner.config.config.Config.global_environment_defaults">global_environment_defaults</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.parse_and_register_decryptors_definitions" href="#ploigos_step_runner.config.config.Config.parse_and_register_decryptors_definitions">parse_and_register_decryptors_definitions</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.set_step_config_overrides" href="#ploigos_step_runner.config.config.Config.set_step_config_overrides">set_step_config_overrides</a></code></li>
<li><code><a title="ploigos_step_runner.config.config.Config.step_configs" href="#ploigos_step_runner.config.config.Config.step_configs">step_configs</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.1</a>.</p>
</footer>
</body>
</html>
