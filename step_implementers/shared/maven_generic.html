<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>ploigos_step_runner.step_implementers.shared.maven_generic API documentation</title>
<meta name="description" content="Abstract parent class for StepImplementers that use Maven â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>ploigos_step_runner.step_implementers.shared.maven_generic</code></h1>
</header>
<section id="section-intro">
<p>Abstract parent class for StepImplementers that use Maven.</p>
<h2 id="step-configuration">Step Configuration</h2>
<p>Step configuration expected as input to this step.
Could come from:
* static configuration
* runtime configuration
* previous step results</p>
<table>
<thead>
<tr>
<th>Configuration Key</th>
<th>Required?</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pom-file</code></td>
<td>Yes</td>
<td><code>'pom.xml'</code></td>
<td>pom used when executing maven.</td>
</tr>
<tr>
<td><code>tls-verify</code></td>
<td>No</td>
<td><code>True</code></td>
<td>Disables TLS Verification if set to False</td>
</tr>
<tr>
<td><code>maven-phases-and-goals</code></td>
<td>Yes</td>
<td></td>
<td>List of maven phases and/or goals to execute.</td>
</tr>
<tr>
<td><code>maven-profiles</code></td>
<td>No</td>
<td><code>[]</code></td>
<td>List of maven profiles to use.</td>
</tr>
<tr>
<td><code>maven-no-transfer-progress</code></td>
<td>No</td>
<td><code>True</code></td>
<td><code>True</code> to suppress the transfer progress of packages maven downloads.</td>
</tr>
<tr>
<td><code>False</code> to have the transfer progress printed.
See <a href="https://maven.apache.org/ref/current/maven-embedder/cli.html">https://maven.apache.org/ref/current/maven-embedder/cli.html</a></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>maven-additional-arguments</code></td>
<td>No</td>
<td><code>[]</code></td>
<td>List of additional arguments to use.</td>
</tr>
<tr>
<td><code>maven-servers</code></td>
<td>No</td>
<td></td>
<td>Dictionary of dictionaries of id, username, password</td>
</tr>
<tr>
<td><code>maven-repositories</code></td>
<td>No</td>
<td></td>
<td>Dictionary of dictionaries of id, url, snapshots, releases</td>
</tr>
<tr>
<td><code>maven-mirrors</code></td>
<td>No</td>
<td></td>
<td>Dictionary of dictionaries of id, url, mirror_of</td>
</tr>
</tbody>
</table>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;Abstract parent class for StepImplementers that use Maven.

Step Configuration
------------------
Step configuration expected as input to this step.
Could come from:
* static configuration
* runtime configuration
* previous step results

Configuration Key            | Required? | Default | Description
-----------------------------|-----------|---------|-----------
`pom-file`                   | Yes       | `&#39;pom.xml&#39;` | pom used when executing maven.
`tls-verify`                 | No        | `True`  | Disables TLS Verification if set to False
`maven-phases-and-goals`     | Yes       |         | List of maven phases and/or goals to execute.
`maven-profiles`             | No        | `[]`    | List of maven profiles to use.
`maven-no-transfer-progress` | No        | `True`  | \
                            `True` to suppress the transfer progress of packages maven downloads.
                            `False` to have the transfer progress printed.\
                            See https://maven.apache.org/ref/current/maven-embedder/cli.html
`maven-additional-arguments` | No        | `[]`    | List of additional arguments to use.
`maven-servers`              | No        |         | Dictionary of dictionaries of id, username, password
`maven-repositories`         | No        |         | Dictionary of dictionaries of id, url, snapshots, releases
`maven-mirrors`              | No        |         | Dictionary of dictionaries of id, url, mirror_of
&#34;&#34;&#34;# pylint: disable=line-too-long

import os

from ploigos_step_runner.results import StepResult
from ploigos_step_runner.exceptions import StepRunnerException
from ploigos_step_runner.config.config_value import ConfigValue
from ploigos_step_runner.step_implementer import StepImplementer
from ploigos_step_runner.utils.maven import (generate_maven_settings,
                                            run_maven, write_effective_pom)
from ploigos_step_runner.utils.xml import get_xml_element_by_path

DEFAULT_CONFIG = {
    &#39;pom-file&#39;: &#39;pom.xml&#39;,
    &#39;tls-verify&#39;: True,
    &#39;maven-profiles&#39;: [],
    &#39;maven-additional-arguments&#39;: [],
    &#39;maven-no-transfer-progress&#39;: True
}

REQUIRED_CONFIG_OR_PREVIOUS_STEP_RESULT_ARTIFACT_KEYS = [
    &#39;pom-file&#39;,
    &#39;maven-phases-and-goals&#39;
]

class MavenGeneric(StepImplementer):
    &#34;&#34;&#34;Abstract parent class for StepImplementers that use Maven.
    &#34;&#34;&#34;

    def __init__(  # pylint: disable=too-many-arguments
        self,
        workflow_result,
        parent_work_dir_path,
        config,
        environment=None,
        maven_phases_and_goals=None
    ):
        self.__maven_settings_file = None
        self.__maven_phases_and_goals = maven_phases_and_goals

        super().__init__(
            workflow_result=workflow_result,
            parent_work_dir_path=parent_work_dir_path,
            config=config,
            environment=environment
        )

    @staticmethod
    def step_implementer_config_defaults():
        &#34;&#34;&#34;Getter for the StepImplementer&#39;s configuration defaults.

        Returns
        -------
        dict
            Default values to use for step configuration values.

        Notes
        -----
        These are the lowest precedence configuration values.
        &#34;&#34;&#34;
        return DEFAULT_CONFIG

    @staticmethod
    def _required_config_or_result_keys():
        &#34;&#34;&#34;Getter for step configuration or previous step result artifacts that are required before
        running this step.

        See Also
        --------
        _validate_required_config_or_previous_step_result_artifact_keys

        Returns
        -------
        array_list
            Array of configuration keys or previous step result artifacts
            that are required before running the step.
        &#34;&#34;&#34;
        return REQUIRED_CONFIG_OR_PREVIOUS_STEP_RESULT_ARTIFACT_KEYS

    def _validate_required_config_or_previous_step_result_artifact_keys(self):
        &#34;&#34;&#34;Validates that the required configuration keys or previous step result artifacts
        are set and have valid values.

        Validates that:
        * required configuration is given
        * given &#39;pom-file&#39; exists

        Raises
        ------
        AssertionError
            If step configuration or previous step result artifacts have invalid required values
        &#34;&#34;&#34;
        super()._validate_required_config_or_previous_step_result_artifact_keys()

        # if pom-file has value verify file exists
        # If it doesn&#39;t have value and is required function will have already failed
        pom_file = self.get_value(&#39;pom-file&#39;)
        if pom_file is not None:
            assert os.path.exists(pom_file), \
                f&#39;Given maven pom file (pom-file) does not exist: {pom_file}&#39;

    @property
    def maven_phases_and_goals(self):
        &#34;&#34;&#34;Property for getting the maven phases and goals to execute which can either come
        from field set on this class via constructor, intended for use by sub classes that want
        to hard code the phases and goals for convenience, or comes from config value
        `maven-phases-and-goals` set by the user.

        Returns
        -------
        str
            Maven phases and/or goals to execute.
        &#34;&#34;&#34;
        maven_phases_and_goals = None
        if self.__maven_phases_and_goals:
            maven_phases_and_goals = self.__maven_phases_and_goals
        else:
            maven_phases_and_goals = self.get_value(&#39;maven-phases-and-goals&#39;)

        return maven_phases_and_goals

    @property
    def maven_settings_file(self):
        &#34;&#34;&#34;Gets the maven settings file for this step.
        &#34;&#34;&#34;

        if not self.__maven_settings_file:
            maven_servers = ConfigValue.convert_leaves_to_values(
                self.get_value(&#39;maven-servers&#39;)
            )
            maven_repositories = ConfigValue.convert_leaves_to_values(
                self.get_value(&#39;maven-repositories&#39;)
            )
            maven_mirrors = ConfigValue.convert_leaves_to_values(
                self.get_value(&#39;maven-mirrors&#39;)
            )

            self.__maven_settings_file = generate_maven_settings(
                working_dir=self.work_dir_path,
                maven_servers=maven_servers,
                maven_repositories=maven_repositories,
                maven_mirrors=maven_mirrors
            )

        return self.__maven_settings_file

    def _get_effective_pom(self):
        &#34;&#34;&#34;Writes the effective pom to a file and returns the path.

        Returns
        -------
        str
            Path to the written effective pom generated from the &#39;pom-file&#39; value.
        &#34;&#34;&#34;
        effective_pom_path = os.path.join(self.work_dir_path, &#39;effective-pom.xml&#39;)

        if not os.path.exists(effective_pom_path):
            write_effective_pom(
                pom_file_path=self.get_value(&#39;pom-file&#39;),
                output_path=effective_pom_path,
                profiles=self.get_value(&#39;maven-profiles&#39;)
            )

        return effective_pom_path

    def _get_effective_pom_element(self, element_path):
        &#34;&#34;&#34;Get an XML element from the effective pom.

        Parameters
        ----------
        element_path : str
            XML path of element to to get from effective pom.

        Returns
        -------
        str
            Value of the element from the effective pom.
        &#34;&#34;&#34;
        return get_xml_element_by_path(
            self._get_effective_pom(),
            element_path,
            default_namespace=&#39;mvn&#39;
        )

    def _run_maven_step(
        self,
        mvn_output_file_path,
        step_implementer_additional_arguments=None
    ):
        &#34;&#34;&#34;Runs maven using the configuration given to this step runner.

        Parameters
        ----------
        mvn_output_file_path : str
            Path to file containing the maven stdout and stderr output.
        step_implementer_additional_arguments : []
            Additional arguments hard coded by the step implementer.

        Raises
        ------
        StepRunnerException
            If maven returns a none 0 exit code.
        &#34;&#34;&#34;

        phases_and_goals = self.maven_phases_and_goals
        pom_file = self.get_value(&#39;pom-file&#39;)
        tls_verify = self.get_value(&#39;tls-verify&#39;)
        profiles = self.get_value(&#39;maven-profiles&#39;)
        no_transfer_progress = self.get_value(&#39;maven-no-transfer-progress&#39;)

        additional_arguments = []
        if step_implementer_additional_arguments:
            additional_arguments = \
                step_implementer_additional_arguments + self.get_value(&#39;maven-additional-arguments&#39;)
        else:
            additional_arguments = self.get_value(&#39;maven-additional-arguments&#39;)

        run_maven(
            mvn_output_file_path=mvn_output_file_path,
            phases_and_goals=phases_and_goals,
            additional_arguments=additional_arguments,
            pom_file=pom_file,
            tls_verify=tls_verify,
            profiles=profiles,
            no_transfer_progress=no_transfer_progress,
            settings_file=self.maven_settings_file
        )

    def _run_step(self): # pylint: disable=too-many-locals
        &#34;&#34;&#34;Runs the step implemented by this StepImplementer.

        Returns
        -------
        StepResult
            Object containing the dictionary results of this step.
        &#34;&#34;&#34;
        step_result = StepResult.from_step_implementer(self)

        # package the artifacts
        mvn_output_file_path = self.write_working_file(&#39;mvn_output.txt&#39;)
        try:
            # execute maven step (params come from config)
            self._run_maven_step(
                mvn_output_file_path=mvn_output_file_path
            )
        except StepRunnerException as error:
            step_result.success = False
            step_result.message = &#34;Error running maven. &#34; \
                f&#34;More details maybe found in &#39;maven-output&#39; report artifact: {error}&#34;
        finally:
            step_result.add_artifact(
                description=&#34;Standard out and standard error from maven.&#34;,
                name=&#39;maven-output&#39;,
                value=mvn_output_file_path
            )

        return step_result</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="ploigos_step_runner.step_implementers.shared.maven_generic.MavenGeneric"><code class="flex name class">
<span>class <span class="ident">MavenGeneric</span></span>
<span>(</span><span>workflow_result, parent_work_dir_path, config, environment=None, maven_phases_and_goals=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Abstract parent class for StepImplementers that use Maven.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MavenGeneric(StepImplementer):
    &#34;&#34;&#34;Abstract parent class for StepImplementers that use Maven.
    &#34;&#34;&#34;

    def __init__(  # pylint: disable=too-many-arguments
        self,
        workflow_result,
        parent_work_dir_path,
        config,
        environment=None,
        maven_phases_and_goals=None
    ):
        self.__maven_settings_file = None
        self.__maven_phases_and_goals = maven_phases_and_goals

        super().__init__(
            workflow_result=workflow_result,
            parent_work_dir_path=parent_work_dir_path,
            config=config,
            environment=environment
        )

    @staticmethod
    def step_implementer_config_defaults():
        &#34;&#34;&#34;Getter for the StepImplementer&#39;s configuration defaults.

        Returns
        -------
        dict
            Default values to use for step configuration values.

        Notes
        -----
        These are the lowest precedence configuration values.
        &#34;&#34;&#34;
        return DEFAULT_CONFIG

    @staticmethod
    def _required_config_or_result_keys():
        &#34;&#34;&#34;Getter for step configuration or previous step result artifacts that are required before
        running this step.

        See Also
        --------
        _validate_required_config_or_previous_step_result_artifact_keys

        Returns
        -------
        array_list
            Array of configuration keys or previous step result artifacts
            that are required before running the step.
        &#34;&#34;&#34;
        return REQUIRED_CONFIG_OR_PREVIOUS_STEP_RESULT_ARTIFACT_KEYS

    def _validate_required_config_or_previous_step_result_artifact_keys(self):
        &#34;&#34;&#34;Validates that the required configuration keys or previous step result artifacts
        are set and have valid values.

        Validates that:
        * required configuration is given
        * given &#39;pom-file&#39; exists

        Raises
        ------
        AssertionError
            If step configuration or previous step result artifacts have invalid required values
        &#34;&#34;&#34;
        super()._validate_required_config_or_previous_step_result_artifact_keys()

        # if pom-file has value verify file exists
        # If it doesn&#39;t have value and is required function will have already failed
        pom_file = self.get_value(&#39;pom-file&#39;)
        if pom_file is not None:
            assert os.path.exists(pom_file), \
                f&#39;Given maven pom file (pom-file) does not exist: {pom_file}&#39;

    @property
    def maven_phases_and_goals(self):
        &#34;&#34;&#34;Property for getting the maven phases and goals to execute which can either come
        from field set on this class via constructor, intended for use by sub classes that want
        to hard code the phases and goals for convenience, or comes from config value
        `maven-phases-and-goals` set by the user.

        Returns
        -------
        str
            Maven phases and/or goals to execute.
        &#34;&#34;&#34;
        maven_phases_and_goals = None
        if self.__maven_phases_and_goals:
            maven_phases_and_goals = self.__maven_phases_and_goals
        else:
            maven_phases_and_goals = self.get_value(&#39;maven-phases-and-goals&#39;)

        return maven_phases_and_goals

    @property
    def maven_settings_file(self):
        &#34;&#34;&#34;Gets the maven settings file for this step.
        &#34;&#34;&#34;

        if not self.__maven_settings_file:
            maven_servers = ConfigValue.convert_leaves_to_values(
                self.get_value(&#39;maven-servers&#39;)
            )
            maven_repositories = ConfigValue.convert_leaves_to_values(
                self.get_value(&#39;maven-repositories&#39;)
            )
            maven_mirrors = ConfigValue.convert_leaves_to_values(
                self.get_value(&#39;maven-mirrors&#39;)
            )

            self.__maven_settings_file = generate_maven_settings(
                working_dir=self.work_dir_path,
                maven_servers=maven_servers,
                maven_repositories=maven_repositories,
                maven_mirrors=maven_mirrors
            )

        return self.__maven_settings_file

    def _get_effective_pom(self):
        &#34;&#34;&#34;Writes the effective pom to a file and returns the path.

        Returns
        -------
        str
            Path to the written effective pom generated from the &#39;pom-file&#39; value.
        &#34;&#34;&#34;
        effective_pom_path = os.path.join(self.work_dir_path, &#39;effective-pom.xml&#39;)

        if not os.path.exists(effective_pom_path):
            write_effective_pom(
                pom_file_path=self.get_value(&#39;pom-file&#39;),
                output_path=effective_pom_path,
                profiles=self.get_value(&#39;maven-profiles&#39;)
            )

        return effective_pom_path

    def _get_effective_pom_element(self, element_path):
        &#34;&#34;&#34;Get an XML element from the effective pom.

        Parameters
        ----------
        element_path : str
            XML path of element to to get from effective pom.

        Returns
        -------
        str
            Value of the element from the effective pom.
        &#34;&#34;&#34;
        return get_xml_element_by_path(
            self._get_effective_pom(),
            element_path,
            default_namespace=&#39;mvn&#39;
        )

    def _run_maven_step(
        self,
        mvn_output_file_path,
        step_implementer_additional_arguments=None
    ):
        &#34;&#34;&#34;Runs maven using the configuration given to this step runner.

        Parameters
        ----------
        mvn_output_file_path : str
            Path to file containing the maven stdout and stderr output.
        step_implementer_additional_arguments : []
            Additional arguments hard coded by the step implementer.

        Raises
        ------
        StepRunnerException
            If maven returns a none 0 exit code.
        &#34;&#34;&#34;

        phases_and_goals = self.maven_phases_and_goals
        pom_file = self.get_value(&#39;pom-file&#39;)
        tls_verify = self.get_value(&#39;tls-verify&#39;)
        profiles = self.get_value(&#39;maven-profiles&#39;)
        no_transfer_progress = self.get_value(&#39;maven-no-transfer-progress&#39;)

        additional_arguments = []
        if step_implementer_additional_arguments:
            additional_arguments = \
                step_implementer_additional_arguments + self.get_value(&#39;maven-additional-arguments&#39;)
        else:
            additional_arguments = self.get_value(&#39;maven-additional-arguments&#39;)

        run_maven(
            mvn_output_file_path=mvn_output_file_path,
            phases_and_goals=phases_and_goals,
            additional_arguments=additional_arguments,
            pom_file=pom_file,
            tls_verify=tls_verify,
            profiles=profiles,
            no_transfer_progress=no_transfer_progress,
            settings_file=self.maven_settings_file
        )

    def _run_step(self): # pylint: disable=too-many-locals
        &#34;&#34;&#34;Runs the step implemented by this StepImplementer.

        Returns
        -------
        StepResult
            Object containing the dictionary results of this step.
        &#34;&#34;&#34;
        step_result = StepResult.from_step_implementer(self)

        # package the artifacts
        mvn_output_file_path = self.write_working_file(&#39;mvn_output.txt&#39;)
        try:
            # execute maven step (params come from config)
            self._run_maven_step(
                mvn_output_file_path=mvn_output_file_path
            )
        except StepRunnerException as error:
            step_result.success = False
            step_result.message = &#34;Error running maven. &#34; \
                f&#34;More details maybe found in &#39;maven-output&#39; report artifact: {error}&#34;
        finally:
            step_result.add_artifact(
                description=&#34;Standard out and standard error from maven.&#34;,
                name=&#39;maven-output&#39;,
                value=mvn_output_file_path
            )

        return step_result</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="ploigos_step_runner.step_implementer.StepImplementer" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer">StepImplementer</a></li>
<li>abc.ABC</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="ploigos_step_runner.step_implementers.create_container_image.maven_jkube_k8sbuild.MavenJKubeK8sBuild" href="../create_container_image/maven_jkube_k8sbuild.html#ploigos_step_runner.step_implementers.create_container_image.maven_jkube_k8sbuild.MavenJKubeK8sBuild">MavenJKubeK8sBuild</a></li>
<li><a title="ploigos_step_runner.step_implementers.generate_metadata.maven.Maven" href="../generate_metadata/maven.html#ploigos_step_runner.step_implementers.generate_metadata.maven.Maven">Maven</a></li>
<li><a title="ploigos_step_runner.step_implementers.package.maven_package.MavenPackage" href="../package/maven_package.html#ploigos_step_runner.step_implementers.package.maven_package.MavenPackage">MavenPackage</a></li>
<li><a title="ploigos_step_runner.step_implementers.push_artifacts.maven_deploy.MavenDeploy" href="../push_artifacts/maven_deploy.html#ploigos_step_runner.step_implementers.push_artifacts.maven_deploy.MavenDeploy">MavenDeploy</a></li>
<li><a title="ploigos_step_runner.step_implementers.uat.maven_integration_test.MavenIntegrationTest" href="../uat/maven_integration_test.html#ploigos_step_runner.step_implementers.uat.maven_integration_test.MavenIntegrationTest">MavenIntegrationTest</a></li>
<li><a title="ploigos_step_runner.step_implementers.unit_test.maven_test.MavenTest" href="../unit_test/maven_test.html#ploigos_step_runner.step_implementers.unit_test.maven_test.MavenTest">MavenTest</a></li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="ploigos_step_runner.step_implementers.shared.maven_generic.MavenGeneric.step_implementer_config_defaults"><code class="name flex">
<span>def <span class="ident">step_implementer_config_defaults</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><p>Getter for the StepImplementer's configuration defaults.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Default values to use for step configuration values.</dd>
</dl>
<h2 id="notes">Notes</h2>
<p>These are the lowest precedence configuration values.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def step_implementer_config_defaults():
    &#34;&#34;&#34;Getter for the StepImplementer&#39;s configuration defaults.

    Returns
    -------
    dict
        Default values to use for step configuration values.

    Notes
    -----
    These are the lowest precedence configuration values.
    &#34;&#34;&#34;
    return DEFAULT_CONFIG</code></pre>
</details>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="ploigos_step_runner.step_implementers.shared.maven_generic.MavenGeneric.maven_phases_and_goals"><code class="name">var <span class="ident">maven_phases_and_goals</span></code></dt>
<dd>
<div class="desc"><p>Property for getting the maven phases and goals to execute which can either come
from field set on this class via constructor, intended for use by sub classes that want
to hard code the phases and goals for convenience, or comes from config value
<code>maven-phases-and-goals</code> set by the user.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>Maven phases and/or goals to execute.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def maven_phases_and_goals(self):
    &#34;&#34;&#34;Property for getting the maven phases and goals to execute which can either come
    from field set on this class via constructor, intended for use by sub classes that want
    to hard code the phases and goals for convenience, or comes from config value
    `maven-phases-and-goals` set by the user.

    Returns
    -------
    str
        Maven phases and/or goals to execute.
    &#34;&#34;&#34;
    maven_phases_and_goals = None
    if self.__maven_phases_and_goals:
        maven_phases_and_goals = self.__maven_phases_and_goals
    else:
        maven_phases_and_goals = self.get_value(&#39;maven-phases-and-goals&#39;)

    return maven_phases_and_goals</code></pre>
</details>
</dd>
<dt id="ploigos_step_runner.step_implementers.shared.maven_generic.MavenGeneric.maven_settings_file"><code class="name">var <span class="ident">maven_settings_file</span></code></dt>
<dd>
<div class="desc"><p>Gets the maven settings file for this step.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def maven_settings_file(self):
    &#34;&#34;&#34;Gets the maven settings file for this step.
    &#34;&#34;&#34;

    if not self.__maven_settings_file:
        maven_servers = ConfigValue.convert_leaves_to_values(
            self.get_value(&#39;maven-servers&#39;)
        )
        maven_repositories = ConfigValue.convert_leaves_to_values(
            self.get_value(&#39;maven-repositories&#39;)
        )
        maven_mirrors = ConfigValue.convert_leaves_to_values(
            self.get_value(&#39;maven-mirrors&#39;)
        )

        self.__maven_settings_file = generate_maven_settings(
            working_dir=self.work_dir_path,
            maven_servers=maven_servers,
            maven_repositories=maven_repositories,
            maven_mirrors=maven_mirrors
        )

    return self.__maven_settings_file</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="ploigos_step_runner.step_implementer.StepImplementer" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer">StepImplementer</a></b></code>:
<ul class="hlist">
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.config" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.config">config</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.create_working_dir_sub_dir" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.create_working_dir_sub_dir">create_working_dir_sub_dir</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.environment" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.environment">environment</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.get_config_value" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.get_config_value">get_config_value</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.get_copy_of_runtime_step_config" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.get_copy_of_runtime_step_config">get_copy_of_runtime_step_config</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.get_result_value" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.get_result_value">get_result_value</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.get_value" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.get_value">get_value</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.global_config_defaults" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.global_config_defaults">global_config_defaults</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.global_environment_config_defaults" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.global_environment_config_defaults">global_environment_config_defaults</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.has_config_value" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.has_config_value">has_config_value</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.run_step" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.run_step">run_step</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.step_config" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.step_config">step_config</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.step_config_overrides" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.step_config_overrides">step_config_overrides</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.step_environment_config" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.step_environment_config">step_environment_config</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.step_name" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.step_name">step_name</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.sub_step_implementer_name" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.sub_step_implementer_name">sub_step_implementer_name</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.sub_step_name" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.sub_step_name">sub_step_name</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.work_dir_path" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.work_dir_path">work_dir_path</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.workflow_result" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.workflow_result">workflow_result</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementer.StepImplementer.write_working_file" href="../../step_implementer.html#ploigos_step_runner.step_implementer.StepImplementer.write_working_file">write_working_file</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#step-configuration">Step Configuration</a></li>
</ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="ploigos_step_runner.step_implementers.shared" href="index.html">ploigos_step_runner.step_implementers.shared</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="ploigos_step_runner.step_implementers.shared.maven_generic.MavenGeneric" href="#ploigos_step_runner.step_implementers.shared.maven_generic.MavenGeneric">MavenGeneric</a></code></h4>
<ul class="">
<li><code><a title="ploigos_step_runner.step_implementers.shared.maven_generic.MavenGeneric.maven_phases_and_goals" href="#ploigos_step_runner.step_implementers.shared.maven_generic.MavenGeneric.maven_phases_and_goals">maven_phases_and_goals</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementers.shared.maven_generic.MavenGeneric.maven_settings_file" href="#ploigos_step_runner.step_implementers.shared.maven_generic.MavenGeneric.maven_settings_file">maven_settings_file</a></code></li>
<li><code><a title="ploigos_step_runner.step_implementers.shared.maven_generic.MavenGeneric.step_implementer_config_defaults" href="#ploigos_step_runner.step_implementers.shared.maven_generic.MavenGeneric.step_implementer_config_defaults">step_implementer_config_defaults</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>